<%- contentFor('style') %>
<style>
    .product-card {
        transition: transform 0.2s ease-in-out;
        height: 100%; /* Let the card fill the column */
        display: flex;
        flex-direction: column;
    }
    .product-card:hover {
        transform: scale(1.05);
    }
    .product-image {
        height: 200px; /* fixed image height */
        object-fit: contain;
        margin-bottom: 15px;
    }
    .card-body {
        flex: 1; /* Fill remaining space */
        display: flex;
        flex-direction: column;
        justify-content: space-between; /* Push Add to Cart button to bottom */
        align-items: center;
        text-align: center;
    }
    .btn-success {
        width: 100%;
    }
</style>

<%- contentFor('body') %>
<div class="container py-5">
    <h1 class="text-center mb-5"><%= pageTitle %></h1>
    <div class="row">
        <% if (products && products.length > 0) { %>
            <% products.forEach(product => { %>
                <div class="col-md-4 mb-4 d-flex">
                    <div class="card product-card shadow-sm w-100">
                        <img src="<%= product.imageUrl || '/uploads/no-image.png' %>" 
                             alt="<%= product.name %>" 
                             class="card-img-top product-image">
                        <div class="card-body">
                            <div>
                                <h5 class="card-title"><%= product.name %></h5>
                                <p class="text-muted"><%= product.brand %> | <%= product.category %></p>
                                <h6 class="text-primary">$<%= product.price %></h6>
                            </div>
                            <form action="/cart/add/<%= product._id %>" method="POST">
                                <button class="btn btn-success">
                                    <i class="fa-solid fa-cart-plus me-2"></i> Add to Cart
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            <% }) %>
        <% } else { %>
            <p class="text-center">No products available.</p>
        <% } %>
    </div>
</div>
