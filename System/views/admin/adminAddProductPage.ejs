<%- contentFor('style') %>


<%- contentFor('body') %>
<div class="container py-5">
  <div class="card shadow-lg rounded-4 mx-auto" style="max-width: 800px;">
    <div class="card-body">
      <h2 class="card-title text-center mb-4">Add New Product</h2>
      <button class="btn btn-primary mb-2">Add New Category</button>
      <button class="btn btn-primary mb-2">Add New Brand</button>

      <form action="/admin/products/create-product" method="POST" enctype="multipart/form-data">
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="name" class="form-label">Product Name</label>
            <input type="text" class="form-control" name="name" id="name" placeholder="iPhone 15 Pro Max Case" required>
          </div>
          <div class="col-md-6">
            <label for="code" class="form-label">Product Code</label>
            <input type="text" class="form-control" name="code" id="code" placeholder="P001" required>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label for="category" class="form-label">Category</label>
            <select id="category" class="form-select" name="category" required>
                <option value="all">All Categories</option>
                <% 
                    const uniqueCategories = [...new Set(categories.map(p => p.name))];
                    uniqueCategories.forEach(category => { 
                %>
                    <option value="<%= category %>"><%= category %></option>
                <% }) %>
            </select>
          </div>
          <div class="col-md-6">
            <label for="brand" class="form-label">Brand</label>
            <select id="brand" class="form-select" name="brand" required>
                <option value="all">All Categories</option>
                <% 
                    const uniqueBrands = [...new Set(brands.map(p => p.name))];
                    uniqueBrands.forEach(brands => { 
                %>
                    <option value="<%= brands %>"><%= brands %></option>
                <% }) %>
            </select>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label for="price" class="form-label">Price ($)</label>
            <input type="number" class="form-control" id="price" name="price" placeholder="35" min="0" required>
          </div>
          <div class="col-md-6">
            <label for="stock" class="form-label">Stock Quantity</label>
            <input type="number" class="form-control" id="stock" name="stock" placeholder="120" min="0" required>
          </div>
        </div>

        <!-- <div class="mb-3">
          <label for="description" class="form-label">Description</label>
          <textarea class="form-control" id="description" rows="4" placeholder="Premium leather case..." required></textarea>
        </div> -->

        <div class="mb-3">
          <label for="imageUrl" class="form-label">Product Image</label>
          <input class="form-control" type="file" id="imageUrl" name="image" accept="image/*">
          <div class="mt-3 text-center">
            <img id="previewImage" src="" alt="Image Preview" class="img-fluid rounded shadow-sm d-none" style="max-height:200px;">
          </div>
        </div>

        <div class="text-center">
          <button class="btn btn-primary px-5 py-2">Add Product</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  const urlParams = new URLSearchParams(window.location.search);
  if (urlParams.get('added') === 'success') {
    Swal.fire({
      icon: 'success',
      title: 'Success!',
      text: 'Product added successfully',
      timer: 2000,
      showConfirmButton: false
    });
  }
</script>